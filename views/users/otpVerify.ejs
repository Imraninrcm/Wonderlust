<% layout("/layouts/boilerplate") %>
<body>
  <div
    class="row justify-content-center align-items-center"
    style="min-height: 80vh"
  >
    <div class="col-md-6">
      <div class="card shadow-lg p-4" style="border-radius: 1.5rem">
        <h2 class="text-center mb-3" style="color: #1d8cb8; font-weight: bold">
          Email Verification
        </h2>
        <p class="text-center mb-4" style="color: #145a7a">
          Please enter the OTP sent to
          <span style="font-weight: 600"><%= email %></span> to verify your
          email address.
        </p>
        <form
          action="/verify-otp"
          method="post"
          novalidate
          class="needs-validation"
        >
          <div class="mb-3">
            <label for="otp" class="form-label" style="font-weight: 500">
              OTP Code
            </label>
            <input
              type="number"
              name="otp"
              required
              id="otp"
              class="form-control text-center"
              placeholder="Enter 6-digit OTP"
              style="font-size: 1.2rem; letter-spacing: 0.2em"
            />
          </div>

          <!-- Countdown Timer Display -->
          <div
            id="timer"
            class="text-center mb-3"
            style="font-weight: bold; color: #038065; font-size: 1.1rem"
          ></div>

          <button
            class="btn btn-success w-100"
            style="font-weight: 500; font-size: 1.1rem"
          >
            Verify OTP
          </button>
        </form>
        <div class="text-center mt-3">
          <a class="nav-link" href="/login" style="color: #1d8cb8"
            >Already have an Account?</a
          >
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Countdown Timer -->
  <script>
    let countdown = 180; // 3 minutes in seconds
    const timerDisplay = document.getElementById("timer");

    const updateTimer = () => {
      const minutes = Math.floor(countdown / 60);
      const seconds = countdown % 60;
      timerDisplay.textContent = `OTP Expires in: ${minutes}:${seconds
        .toString()
        .padStart(2, "0")}`;

      if (countdown > 0) {
        countdown--;
      } else {
        timerDisplay.textContent =
          "OTP expired. Please reload the page to get a new one.";
        document.getElementById("otp").disabled = true;
      }
    };

    updateTimer(); // Initial call
    setInterval(updateTimer, 1000); // Call every second
  </script>
</body>
